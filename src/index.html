<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>BrowseDrive</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <script src="http://apis.google.com/js/client.js"></script>
    <script src="http://apis.google.com/js/api.js"></script>
    <!-- <script>
      !function () {
        (this.apiKey = "AIzaSyD6W11hnCsm82Xb_CrNFjjx8cfEDQ6lH7k"),
          (this.clientId =
            "996313332086-t0e96n8s71mga0k254m48qirs77fjai9.apps.googleusercontent.com"),
          (this.scopes = ["https://www.googleapis.com/auth/drive"]),
          (this.features = ["MULTISELECT_ENABLED"]),
          (this.views = [
            "DocsView().setIncludeFolders(true)",
            "DocsUploadView().setIncludeFolders(true)",
          ]),
          (this.locale = "en"),
          (this.$get = [
            "$window",
            function (e) {
              return {
                apiKey: this.apiKey,
                clientId: this.clientId,
                scopes: this.scopes,
                features: this.features,
                views: this.views,
                locale: this.locale,
                origin:
                  this.origin || e.location.protocol + "//" + e.location.host,
              };
            },
          ]),
          (this.configure = function (e) {
            for (var o in e) this[o] = e[o];
          });
      }.directive("lkGooglePicker", [
        "lkGoogleSettings",
        function (lkGoogleSettings) {
          return {
            restrict: "A",
            scope: { onLoaded: "&", onCancel: "&", onPicked: "&" },
            link: function (scope, element, attrs) {
              function instanciate() {
                gapi.load("auth", { callback: onApiAuthLoad }),
                  gapi.load("picker");
              }
              function onApiAuthLoad() {
                var e = gapi.auth.getToken();
                e
                  ? handleAuthResult(e)
                  : gapi.auth.authorize(
                      {
                        client_id: lkGoogleSettings.clientId,
                        scope: lkGoogleSettings.scopes,
                        immediate: !1,
                      },
                      handleAuthResult
                    );
              }
              function handleAuthResult(e) {
                e && !e.error && ((accessToken = e.access_token), openDialog());
              }
              function openDialog() {
                var picker = new google.picker.PickerBuilder()
                  .setLocale(lkGoogleSettings.locale)
                  .setOAuthToken(accessToken)
                  .setCallback(pickerResponse)
                  .setOrigin(lkGoogleSettings.origin);
                lkGoogleSettings.features.length > 0 &&
                  angular.forEach(lkGoogleSettings.features, function (e, o) {
                    picker.enableFeature(google.picker.Feature[e]);
                  }),
                  lkGoogleSettings.views.length > 0 &&
                    angular.forEach(
                      lkGoogleSettings.views,
                      function (view, key) {
                        (view = eval("new google.picker." + view)),
                          picker.addView(view);
                      }
                    ),
                  picker.build().setVisible(!0);
              }
              function pickerResponse(e) {
                gapi.client.load("drive", "v2", function () {
                  e.action == google.picker.Action.LOADED &&
                    scope.onLoaded &&
                    (scope.onLoaded || angular.noop)(),
                    e.action == google.picker.Action.CANCEL &&
                      scope.onCancel &&
                      (scope.onCancel || angular.noop)(),
                    e.action == google.picker.Action.PICKED &&
                      scope.onPicked &&
                      (scope.onPicked || angular.noop)({ docs: e.docs }),
                    scope.$apply();
                });
              }
              var accessToken = null;
              gapi.load("auth"),
                gapi.load("picker"),
                element.bind("click", function (e) {
                  instanciate();
                });
            },
          };
        },
      ]);
    </script> -->
  </head>
  <body>
    <app-root></app-root>
    <router-outlet></router-outlet>
  </body>
</html>
